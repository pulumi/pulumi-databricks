// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package databricks

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-databricks/sdk/go/databricks/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Within a metastore, Unity Catalog provides the ability to create a recipient to attach delta shares to.
//
// A `Recipient` is contained within Metastore and can have permissions to `SELECT` from a list of shares.
//
// ## Example Usage
// ### Databricks Sharing with non databricks recipient
//
// Setting `authenticationType` type to `TOKEN` creates a temporary url to download a credentials file. This is used to
// authenticate to the sharing server to access data. This is for when the recipient is not using Databricks.
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-databricks/sdk/go/databricks"
//	"github.com/pulumi/pulumi-random/sdk/v4/go/random"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			db2opensharecode, err := random.NewRandomPassword(ctx, "db2opensharecode", &random.RandomPasswordArgs{
//				Length:  pulumi.Int(16),
//				Special: pulumi.Bool(true),
//			})
//			if err != nil {
//				return err
//			}
//			_, err = databricks.GetCurrentUser(ctx, nil, nil)
//			if err != nil {
//				return err
//			}
//			_, err = databricks.NewRecipient(ctx, "db2open", &databricks.RecipientArgs{
//				Comment:            pulumi.String("made by terraform"),
//				AuthenticationType: pulumi.String("TOKEN"),
//				SharingCode:        db2opensharecode.Result,
//				IpAccessList: &databricks.RecipientIpAccessListArgs{
//					AllowedIpAddresses: pulumi.StringArray{},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
// ## Related Resources
//
// The following resources are often used in the same context:
//
// * Share to create Delta Sharing shares.
// * Grants to manage Delta Sharing permissions.
// * getShares to read existing Delta Sharing shares.
type Recipient struct {
	pulumi.CustomResourceState

	// The delta sharing authentication type. Valid values are `TOKEN` and `DATABRICKS`.
	AuthenticationType pulumi.StringOutput `pulumi:"authenticationType"`
	// Description about the recipient.
	Comment pulumi.StringPtrOutput `pulumi:"comment"`
	// Required when `authenticationType` is `DATABRICKS`.
	DataRecipientGlobalMetastoreId pulumi.StringPtrOutput `pulumi:"dataRecipientGlobalMetastoreId"`
	// Recipient IP access list.
	IpAccessList RecipientIpAccessListPtrOutput `pulumi:"ipAccessList"`
	// Name of recipient. Change forces creation of a new resource.
	Name pulumi.StringOutput `pulumi:"name"`
	// Username/groupname/sp applicationId of the recipient owner.
	Owner pulumi.StringPtrOutput `pulumi:"owner"`
	// The one-time sharing code provided by the data recipient.
	SharingCode pulumi.StringPtrOutput `pulumi:"sharingCode"`
	// List of Recipient Tokens. This field is only present when the authenticationType is TOKEN. Each list element is an object with following attributes:
	Tokens RecipientTokenArrayOutput `pulumi:"tokens"`
}

// NewRecipient registers a new resource with the given unique name, arguments, and options.
func NewRecipient(ctx *pulumi.Context,
	name string, args *RecipientArgs, opts ...pulumi.ResourceOption) (*Recipient, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.AuthenticationType == nil {
		return nil, errors.New("invalid value for required argument 'AuthenticationType'")
	}
	if args.SharingCode != nil {
		args.SharingCode = pulumi.ToSecret(args.SharingCode).(pulumi.StringPtrInput)
	}
	secrets := pulumi.AdditionalSecretOutputs([]string{
		"sharingCode",
	})
	opts = append(opts, secrets)
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource Recipient
	err := ctx.RegisterResource("databricks:index/recipient:Recipient", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetRecipient gets an existing Recipient resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetRecipient(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *RecipientState, opts ...pulumi.ResourceOption) (*Recipient, error) {
	var resource Recipient
	err := ctx.ReadResource("databricks:index/recipient:Recipient", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering Recipient resources.
type recipientState struct {
	// The delta sharing authentication type. Valid values are `TOKEN` and `DATABRICKS`.
	AuthenticationType *string `pulumi:"authenticationType"`
	// Description about the recipient.
	Comment *string `pulumi:"comment"`
	// Required when `authenticationType` is `DATABRICKS`.
	DataRecipientGlobalMetastoreId *string `pulumi:"dataRecipientGlobalMetastoreId"`
	// Recipient IP access list.
	IpAccessList *RecipientIpAccessList `pulumi:"ipAccessList"`
	// Name of recipient. Change forces creation of a new resource.
	Name *string `pulumi:"name"`
	// Username/groupname/sp applicationId of the recipient owner.
	Owner *string `pulumi:"owner"`
	// The one-time sharing code provided by the data recipient.
	SharingCode *string `pulumi:"sharingCode"`
	// List of Recipient Tokens. This field is only present when the authenticationType is TOKEN. Each list element is an object with following attributes:
	Tokens []RecipientToken `pulumi:"tokens"`
}

type RecipientState struct {
	// The delta sharing authentication type. Valid values are `TOKEN` and `DATABRICKS`.
	AuthenticationType pulumi.StringPtrInput
	// Description about the recipient.
	Comment pulumi.StringPtrInput
	// Required when `authenticationType` is `DATABRICKS`.
	DataRecipientGlobalMetastoreId pulumi.StringPtrInput
	// Recipient IP access list.
	IpAccessList RecipientIpAccessListPtrInput
	// Name of recipient. Change forces creation of a new resource.
	Name pulumi.StringPtrInput
	// Username/groupname/sp applicationId of the recipient owner.
	Owner pulumi.StringPtrInput
	// The one-time sharing code provided by the data recipient.
	SharingCode pulumi.StringPtrInput
	// List of Recipient Tokens. This field is only present when the authenticationType is TOKEN. Each list element is an object with following attributes:
	Tokens RecipientTokenArrayInput
}

func (RecipientState) ElementType() reflect.Type {
	return reflect.TypeOf((*recipientState)(nil)).Elem()
}

type recipientArgs struct {
	// The delta sharing authentication type. Valid values are `TOKEN` and `DATABRICKS`.
	AuthenticationType string `pulumi:"authenticationType"`
	// Description about the recipient.
	Comment *string `pulumi:"comment"`
	// Required when `authenticationType` is `DATABRICKS`.
	DataRecipientGlobalMetastoreId *string `pulumi:"dataRecipientGlobalMetastoreId"`
	// Recipient IP access list.
	IpAccessList *RecipientIpAccessList `pulumi:"ipAccessList"`
	// Name of recipient. Change forces creation of a new resource.
	Name *string `pulumi:"name"`
	// Username/groupname/sp applicationId of the recipient owner.
	Owner *string `pulumi:"owner"`
	// The one-time sharing code provided by the data recipient.
	SharingCode *string `pulumi:"sharingCode"`
	// List of Recipient Tokens. This field is only present when the authenticationType is TOKEN. Each list element is an object with following attributes:
	Tokens []RecipientToken `pulumi:"tokens"`
}

// The set of arguments for constructing a Recipient resource.
type RecipientArgs struct {
	// The delta sharing authentication type. Valid values are `TOKEN` and `DATABRICKS`.
	AuthenticationType pulumi.StringInput
	// Description about the recipient.
	Comment pulumi.StringPtrInput
	// Required when `authenticationType` is `DATABRICKS`.
	DataRecipientGlobalMetastoreId pulumi.StringPtrInput
	// Recipient IP access list.
	IpAccessList RecipientIpAccessListPtrInput
	// Name of recipient. Change forces creation of a new resource.
	Name pulumi.StringPtrInput
	// Username/groupname/sp applicationId of the recipient owner.
	Owner pulumi.StringPtrInput
	// The one-time sharing code provided by the data recipient.
	SharingCode pulumi.StringPtrInput
	// List of Recipient Tokens. This field is only present when the authenticationType is TOKEN. Each list element is an object with following attributes:
	Tokens RecipientTokenArrayInput
}

func (RecipientArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*recipientArgs)(nil)).Elem()
}

type RecipientInput interface {
	pulumi.Input

	ToRecipientOutput() RecipientOutput
	ToRecipientOutputWithContext(ctx context.Context) RecipientOutput
}

func (*Recipient) ElementType() reflect.Type {
	return reflect.TypeOf((**Recipient)(nil)).Elem()
}

func (i *Recipient) ToRecipientOutput() RecipientOutput {
	return i.ToRecipientOutputWithContext(context.Background())
}

func (i *Recipient) ToRecipientOutputWithContext(ctx context.Context) RecipientOutput {
	return pulumi.ToOutputWithContext(ctx, i).(RecipientOutput)
}

// RecipientArrayInput is an input type that accepts RecipientArray and RecipientArrayOutput values.
// You can construct a concrete instance of `RecipientArrayInput` via:
//
//	RecipientArray{ RecipientArgs{...} }
type RecipientArrayInput interface {
	pulumi.Input

	ToRecipientArrayOutput() RecipientArrayOutput
	ToRecipientArrayOutputWithContext(context.Context) RecipientArrayOutput
}

type RecipientArray []RecipientInput

func (RecipientArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Recipient)(nil)).Elem()
}

func (i RecipientArray) ToRecipientArrayOutput() RecipientArrayOutput {
	return i.ToRecipientArrayOutputWithContext(context.Background())
}

func (i RecipientArray) ToRecipientArrayOutputWithContext(ctx context.Context) RecipientArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(RecipientArrayOutput)
}

// RecipientMapInput is an input type that accepts RecipientMap and RecipientMapOutput values.
// You can construct a concrete instance of `RecipientMapInput` via:
//
//	RecipientMap{ "key": RecipientArgs{...} }
type RecipientMapInput interface {
	pulumi.Input

	ToRecipientMapOutput() RecipientMapOutput
	ToRecipientMapOutputWithContext(context.Context) RecipientMapOutput
}

type RecipientMap map[string]RecipientInput

func (RecipientMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Recipient)(nil)).Elem()
}

func (i RecipientMap) ToRecipientMapOutput() RecipientMapOutput {
	return i.ToRecipientMapOutputWithContext(context.Background())
}

func (i RecipientMap) ToRecipientMapOutputWithContext(ctx context.Context) RecipientMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(RecipientMapOutput)
}

type RecipientOutput struct{ *pulumi.OutputState }

func (RecipientOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**Recipient)(nil)).Elem()
}

func (o RecipientOutput) ToRecipientOutput() RecipientOutput {
	return o
}

func (o RecipientOutput) ToRecipientOutputWithContext(ctx context.Context) RecipientOutput {
	return o
}

// The delta sharing authentication type. Valid values are `TOKEN` and `DATABRICKS`.
func (o RecipientOutput) AuthenticationType() pulumi.StringOutput {
	return o.ApplyT(func(v *Recipient) pulumi.StringOutput { return v.AuthenticationType }).(pulumi.StringOutput)
}

// Description about the recipient.
func (o RecipientOutput) Comment() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *Recipient) pulumi.StringPtrOutput { return v.Comment }).(pulumi.StringPtrOutput)
}

// Required when `authenticationType` is `DATABRICKS`.
func (o RecipientOutput) DataRecipientGlobalMetastoreId() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *Recipient) pulumi.StringPtrOutput { return v.DataRecipientGlobalMetastoreId }).(pulumi.StringPtrOutput)
}

// Recipient IP access list.
func (o RecipientOutput) IpAccessList() RecipientIpAccessListPtrOutput {
	return o.ApplyT(func(v *Recipient) RecipientIpAccessListPtrOutput { return v.IpAccessList }).(RecipientIpAccessListPtrOutput)
}

// Name of recipient. Change forces creation of a new resource.
func (o RecipientOutput) Name() pulumi.StringOutput {
	return o.ApplyT(func(v *Recipient) pulumi.StringOutput { return v.Name }).(pulumi.StringOutput)
}

// Username/groupname/sp applicationId of the recipient owner.
func (o RecipientOutput) Owner() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *Recipient) pulumi.StringPtrOutput { return v.Owner }).(pulumi.StringPtrOutput)
}

// The one-time sharing code provided by the data recipient.
func (o RecipientOutput) SharingCode() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *Recipient) pulumi.StringPtrOutput { return v.SharingCode }).(pulumi.StringPtrOutput)
}

// List of Recipient Tokens. This field is only present when the authenticationType is TOKEN. Each list element is an object with following attributes:
func (o RecipientOutput) Tokens() RecipientTokenArrayOutput {
	return o.ApplyT(func(v *Recipient) RecipientTokenArrayOutput { return v.Tokens }).(RecipientTokenArrayOutput)
}

type RecipientArrayOutput struct{ *pulumi.OutputState }

func (RecipientArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Recipient)(nil)).Elem()
}

func (o RecipientArrayOutput) ToRecipientArrayOutput() RecipientArrayOutput {
	return o
}

func (o RecipientArrayOutput) ToRecipientArrayOutputWithContext(ctx context.Context) RecipientArrayOutput {
	return o
}

func (o RecipientArrayOutput) Index(i pulumi.IntInput) RecipientOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *Recipient {
		return vs[0].([]*Recipient)[vs[1].(int)]
	}).(RecipientOutput)
}

type RecipientMapOutput struct{ *pulumi.OutputState }

func (RecipientMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Recipient)(nil)).Elem()
}

func (o RecipientMapOutput) ToRecipientMapOutput() RecipientMapOutput {
	return o
}

func (o RecipientMapOutput) ToRecipientMapOutputWithContext(ctx context.Context) RecipientMapOutput {
	return o
}

func (o RecipientMapOutput) MapIndex(k pulumi.StringInput) RecipientOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *Recipient {
		return vs[0].(map[string]*Recipient)[vs[1].(string)]
	}).(RecipientOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*RecipientInput)(nil)).Elem(), &Recipient{})
	pulumi.RegisterInputType(reflect.TypeOf((*RecipientArrayInput)(nil)).Elem(), RecipientArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*RecipientMapInput)(nil)).Elem(), RecipientMap{})
	pulumi.RegisterOutputType(RecipientOutput{})
	pulumi.RegisterOutputType(RecipientArrayOutput{})
	pulumi.RegisterOutputType(RecipientMapOutput{})
}
