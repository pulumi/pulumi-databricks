// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as utilities from "./utilities";

/**
 * > This resource can be used with an account or workspace-level provider.
 *
 * A metastore is the top-level container of objects in Unity Catalog. It stores data assets (tables and views) and the permissions that govern access to them. Databricks account admins can create metastores and assign them to Databricks workspaces in order to control which workloads use each metastore.
 *
 * Unity Catalog offers a new metastore with built in security and auditing. This is distinct to the metastore used in previous versions of Databricks (based on the Hive Metastore).
 *
 * A Unity Catalog metastore can be created without a root location & credential to maintain strict separation of storage across catalogs or environments.
 *
 * ## Example Usage
 *
 * For AWS
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as databricks from "@pulumi/databricks";
 *
 * const _this = new databricks.Metastore("this", {
 *     name: "primary",
 *     storageRoot: `s3://${metastore.id}/metastore`,
 *     owner: "uc admins",
 *     region: "us-east-1",
 *     forceDestroy: true,
 * });
 * const thisMetastoreAssignment = new databricks.MetastoreAssignment("this", {
 *     metastoreId: _this.id,
 *     workspaceId: workspaceId,
 * });
 * ```
 *
 * For Azure
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as databricks from "@pulumi/databricks";
 * import * as std from "@pulumi/std";
 *
 * const _this = new databricks.Metastore("this", {
 *     name: "primary",
 *     storageRoot: std.format({
 *         input: "abfss://%s@%s.dfs.core.windows.net/",
 *         args: [
 *             unityCatalog.name,
 *             unityCatalogAzurermStorageAccount.name,
 *         ],
 *     }).then(invoke => invoke.result),
 *     owner: "uc admins",
 *     region: "eastus",
 *     forceDestroy: true,
 * });
 * const thisMetastoreAssignment = new databricks.MetastoreAssignment("this", {
 *     metastoreId: _this.id,
 *     workspaceId: workspaceId,
 * });
 * ```
 *
 * For GCP
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as databricks from "@pulumi/databricks";
 *
 * const _this = new databricks.Metastore("this", {
 *     name: "primary",
 *     storageRoot: `gs://${unityMetastore.name}`,
 *     owner: "uc admins",
 *     region: us_east1,
 *     forceDestroy: true,
 * });
 * const thisMetastoreAssignment = new databricks.MetastoreAssignment("this", {
 *     metastoreId: _this.id,
 *     workspaceId: workspaceId,
 * });
 * ```
 */
export class Metastore extends pulumi.CustomResource {
    /**
     * Get an existing Metastore resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: MetastoreState, opts?: pulumi.CustomResourceOptions): Metastore {
        return new Metastore(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'databricks:index/metastore:Metastore';

    /**
     * Returns true if the given object is an instance of Metastore.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is Metastore {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === Metastore.__pulumiType;
    }

    /**
     * Cloud vendor of the metastore home shard (e.g., `aws`, `azure`, `gcp`).
     */
    declare public /*out*/ readonly cloud: pulumi.Output<string>;
    /**
     * Time at which the metastore was created, in epoch milliseconds.
     */
    declare public /*out*/ readonly createdAt: pulumi.Output<number>;
    /**
     * Username of metastore creator.
     */
    declare public /*out*/ readonly createdBy: pulumi.Output<string>;
    /**
     * (Optional) Unique identifier of the metastore's default data access configuration.
     */
    declare public readonly defaultDataAccessConfigId: pulumi.Output<string | undefined>;
    /**
     * The organization name of a Delta Sharing entity. This field is used for Databricks to Databricks sharing. Once this is set it cannot be removed and can only be modified to another valid value. To delete this value please taint and recreate the resource.
     */
    declare public readonly deltaSharingOrganizationName: pulumi.Output<string | undefined>;
    /**
     * Required along with `deltaSharingScope`. Used to set expiration duration in seconds on recipient data access tokens. Set to 0 for unlimited duration.
     */
    declare public readonly deltaSharingRecipientTokenLifetimeInSeconds: pulumi.Output<number | undefined>;
    /**
     * Required along with `deltaSharingRecipientTokenLifetimeInSeconds`. Used to enable delta sharing on the metastore. Valid values: `INTERNAL`, `INTERNAL_AND_EXTERNAL`.  `INTERNAL` only allows sharing within the same account, and `INTERNAL_AND_EXTERNAL` allows cross account sharing and token based sharing.
     */
    declare public readonly deltaSharingScope: pulumi.Output<string | undefined>;
    /**
     * Whether to allow non-DBR clients to directly access entities under the metastore.
     */
    declare public readonly externalAccessEnabled: pulumi.Output<boolean | undefined>;
    /**
     * Destroy metastore regardless of its contents.
     */
    declare public readonly forceDestroy: pulumi.Output<boolean | undefined>;
    /**
     * Globally unique metastore ID across clouds and regions, of the form `cloud:region:metastore_id`.
     */
    declare public /*out*/ readonly globalMetastoreId: pulumi.Output<string>;
    /**
     * Unique identifier of the metastore.
     */
    declare public /*out*/ readonly metastoreId: pulumi.Output<string>;
    /**
     * Name of metastore.
     */
    declare public readonly name: pulumi.Output<string>;
    /**
     * Username/groupname/sp applicationId of the metastore owner.
     */
    declare public readonly owner: pulumi.Output<string>;
    /**
     * Privilege model version of the metastore, of the form `major.minor` (e.g., `1.0`).
     */
    declare public readonly privilegeModelVersion: pulumi.Output<string>;
    /**
     * The region of the metastore
     */
    declare public readonly region: pulumi.Output<string>;
    /**
     * Path on cloud storage account, where managed `databricks.Table` are stored.  If the URL contains special characters, such as space, `&`, etc., they should be percent-encoded (space > `%20`, etc.). Change forces creation of a new resource. If no `storageRoot` is defined for the metastore, each catalog must have a `storageRoot` defined.  **It's recommended to define `storageRoot` on the catalog level.
     */
    declare public readonly storageRoot: pulumi.Output<string | undefined>;
    /**
     * (Optional) UUID of storage credential to access the metastore storage_root.
     */
    declare public readonly storageRootCredentialId: pulumi.Output<string | undefined>;
    /**
     * Name of the storage credential to access the metastore storage_root.
     */
    declare public readonly storageRootCredentialName: pulumi.Output<string | undefined>;
    /**
     * Time at which the metastore was last modified, in epoch milliseconds.
     */
    declare public /*out*/ readonly updatedAt: pulumi.Output<number>;
    /**
     * Username of user who last modified the metastore.
     */
    declare public /*out*/ readonly updatedBy: pulumi.Output<string>;

    /**
     * Create a Metastore resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args?: MetastoreArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: MetastoreArgs | MetastoreState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as MetastoreState | undefined;
            resourceInputs["cloud"] = state?.cloud;
            resourceInputs["createdAt"] = state?.createdAt;
            resourceInputs["createdBy"] = state?.createdBy;
            resourceInputs["defaultDataAccessConfigId"] = state?.defaultDataAccessConfigId;
            resourceInputs["deltaSharingOrganizationName"] = state?.deltaSharingOrganizationName;
            resourceInputs["deltaSharingRecipientTokenLifetimeInSeconds"] = state?.deltaSharingRecipientTokenLifetimeInSeconds;
            resourceInputs["deltaSharingScope"] = state?.deltaSharingScope;
            resourceInputs["externalAccessEnabled"] = state?.externalAccessEnabled;
            resourceInputs["forceDestroy"] = state?.forceDestroy;
            resourceInputs["globalMetastoreId"] = state?.globalMetastoreId;
            resourceInputs["metastoreId"] = state?.metastoreId;
            resourceInputs["name"] = state?.name;
            resourceInputs["owner"] = state?.owner;
            resourceInputs["privilegeModelVersion"] = state?.privilegeModelVersion;
            resourceInputs["region"] = state?.region;
            resourceInputs["storageRoot"] = state?.storageRoot;
            resourceInputs["storageRootCredentialId"] = state?.storageRootCredentialId;
            resourceInputs["storageRootCredentialName"] = state?.storageRootCredentialName;
            resourceInputs["updatedAt"] = state?.updatedAt;
            resourceInputs["updatedBy"] = state?.updatedBy;
        } else {
            const args = argsOrState as MetastoreArgs | undefined;
            resourceInputs["defaultDataAccessConfigId"] = args?.defaultDataAccessConfigId;
            resourceInputs["deltaSharingOrganizationName"] = args?.deltaSharingOrganizationName;
            resourceInputs["deltaSharingRecipientTokenLifetimeInSeconds"] = args?.deltaSharingRecipientTokenLifetimeInSeconds;
            resourceInputs["deltaSharingScope"] = args?.deltaSharingScope;
            resourceInputs["externalAccessEnabled"] = args?.externalAccessEnabled;
            resourceInputs["forceDestroy"] = args?.forceDestroy;
            resourceInputs["name"] = args?.name;
            resourceInputs["owner"] = args?.owner;
            resourceInputs["privilegeModelVersion"] = args?.privilegeModelVersion;
            resourceInputs["region"] = args?.region;
            resourceInputs["storageRoot"] = args?.storageRoot;
            resourceInputs["storageRootCredentialId"] = args?.storageRootCredentialId;
            resourceInputs["storageRootCredentialName"] = args?.storageRootCredentialName;
            resourceInputs["cloud"] = undefined /*out*/;
            resourceInputs["createdAt"] = undefined /*out*/;
            resourceInputs["createdBy"] = undefined /*out*/;
            resourceInputs["globalMetastoreId"] = undefined /*out*/;
            resourceInputs["metastoreId"] = undefined /*out*/;
            resourceInputs["updatedAt"] = undefined /*out*/;
            resourceInputs["updatedBy"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        super(Metastore.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering Metastore resources.
 */
export interface MetastoreState {
    /**
     * Cloud vendor of the metastore home shard (e.g., `aws`, `azure`, `gcp`).
     */
    cloud?: pulumi.Input<string>;
    /**
     * Time at which the metastore was created, in epoch milliseconds.
     */
    createdAt?: pulumi.Input<number>;
    /**
     * Username of metastore creator.
     */
    createdBy?: pulumi.Input<string>;
    /**
     * (Optional) Unique identifier of the metastore's default data access configuration.
     */
    defaultDataAccessConfigId?: pulumi.Input<string>;
    /**
     * The organization name of a Delta Sharing entity. This field is used for Databricks to Databricks sharing. Once this is set it cannot be removed and can only be modified to another valid value. To delete this value please taint and recreate the resource.
     */
    deltaSharingOrganizationName?: pulumi.Input<string>;
    /**
     * Required along with `deltaSharingScope`. Used to set expiration duration in seconds on recipient data access tokens. Set to 0 for unlimited duration.
     */
    deltaSharingRecipientTokenLifetimeInSeconds?: pulumi.Input<number>;
    /**
     * Required along with `deltaSharingRecipientTokenLifetimeInSeconds`. Used to enable delta sharing on the metastore. Valid values: `INTERNAL`, `INTERNAL_AND_EXTERNAL`.  `INTERNAL` only allows sharing within the same account, and `INTERNAL_AND_EXTERNAL` allows cross account sharing and token based sharing.
     */
    deltaSharingScope?: pulumi.Input<string>;
    /**
     * Whether to allow non-DBR clients to directly access entities under the metastore.
     */
    externalAccessEnabled?: pulumi.Input<boolean>;
    /**
     * Destroy metastore regardless of its contents.
     */
    forceDestroy?: pulumi.Input<boolean>;
    /**
     * Globally unique metastore ID across clouds and regions, of the form `cloud:region:metastore_id`.
     */
    globalMetastoreId?: pulumi.Input<string>;
    /**
     * Unique identifier of the metastore.
     */
    metastoreId?: pulumi.Input<string>;
    /**
     * Name of metastore.
     */
    name?: pulumi.Input<string>;
    /**
     * Username/groupname/sp applicationId of the metastore owner.
     */
    owner?: pulumi.Input<string>;
    /**
     * Privilege model version of the metastore, of the form `major.minor` (e.g., `1.0`).
     */
    privilegeModelVersion?: pulumi.Input<string>;
    /**
     * The region of the metastore
     */
    region?: pulumi.Input<string>;
    /**
     * Path on cloud storage account, where managed `databricks.Table` are stored.  If the URL contains special characters, such as space, `&`, etc., they should be percent-encoded (space > `%20`, etc.). Change forces creation of a new resource. If no `storageRoot` is defined for the metastore, each catalog must have a `storageRoot` defined.  **It's recommended to define `storageRoot` on the catalog level.
     */
    storageRoot?: pulumi.Input<string>;
    /**
     * (Optional) UUID of storage credential to access the metastore storage_root.
     */
    storageRootCredentialId?: pulumi.Input<string>;
    /**
     * Name of the storage credential to access the metastore storage_root.
     */
    storageRootCredentialName?: pulumi.Input<string>;
    /**
     * Time at which the metastore was last modified, in epoch milliseconds.
     */
    updatedAt?: pulumi.Input<number>;
    /**
     * Username of user who last modified the metastore.
     */
    updatedBy?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a Metastore resource.
 */
export interface MetastoreArgs {
    /**
     * (Optional) Unique identifier of the metastore's default data access configuration.
     */
    defaultDataAccessConfigId?: pulumi.Input<string>;
    /**
     * The organization name of a Delta Sharing entity. This field is used for Databricks to Databricks sharing. Once this is set it cannot be removed and can only be modified to another valid value. To delete this value please taint and recreate the resource.
     */
    deltaSharingOrganizationName?: pulumi.Input<string>;
    /**
     * Required along with `deltaSharingScope`. Used to set expiration duration in seconds on recipient data access tokens. Set to 0 for unlimited duration.
     */
    deltaSharingRecipientTokenLifetimeInSeconds?: pulumi.Input<number>;
    /**
     * Required along with `deltaSharingRecipientTokenLifetimeInSeconds`. Used to enable delta sharing on the metastore. Valid values: `INTERNAL`, `INTERNAL_AND_EXTERNAL`.  `INTERNAL` only allows sharing within the same account, and `INTERNAL_AND_EXTERNAL` allows cross account sharing and token based sharing.
     */
    deltaSharingScope?: pulumi.Input<string>;
    /**
     * Whether to allow non-DBR clients to directly access entities under the metastore.
     */
    externalAccessEnabled?: pulumi.Input<boolean>;
    /**
     * Destroy metastore regardless of its contents.
     */
    forceDestroy?: pulumi.Input<boolean>;
    /**
     * Name of metastore.
     */
    name?: pulumi.Input<string>;
    /**
     * Username/groupname/sp applicationId of the metastore owner.
     */
    owner?: pulumi.Input<string>;
    /**
     * Privilege model version of the metastore, of the form `major.minor` (e.g., `1.0`).
     */
    privilegeModelVersion?: pulumi.Input<string>;
    /**
     * The region of the metastore
     */
    region?: pulumi.Input<string>;
    /**
     * Path on cloud storage account, where managed `databricks.Table` are stored.  If the URL contains special characters, such as space, `&`, etc., they should be percent-encoded (space > `%20`, etc.). Change forces creation of a new resource. If no `storageRoot` is defined for the metastore, each catalog must have a `storageRoot` defined.  **It's recommended to define `storageRoot` on the catalog level.
     */
    storageRoot?: pulumi.Input<string>;
    /**
     * (Optional) UUID of storage credential to access the metastore storage_root.
     */
    storageRootCredentialId?: pulumi.Input<string>;
    /**
     * Name of the storage credential to access the metastore storage_root.
     */
    storageRootCredentialName?: pulumi.Input<string>;
}
